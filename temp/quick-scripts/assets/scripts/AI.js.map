{"version":3,"sources":["AI.js"],"names":["mathUtil","require","cc","Class","extends","Component","properties","ControlOn","Enemy","Node","GameWorld","SelfMonster","bg","obstacle1","obstacle2","obstacle3","setMap","game","getComponent","setEnemy","enemy","setSelf","startControl","find","callback","gameOver","unschedule","getDistance","node","getPosition","starSprite","children","length","newVer2","turnByAngle","posi","angle","x","y","getAngle","nearStar","dis","console","log","i","star","dis2","move","schedule","stopControl","value","start"],"mappings":"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","file":"AI.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet mathUtil = require(\"util/mathUtil\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ControlOn:false,\r\n        Enemy:cc.Node,\r\n        GameWorld:cc.Node,\r\n        SelfMonster:null,\r\n        bg:cc.Node,\r\n        obstacle1:cc.Node,\r\n        obstacle2:cc.Node,\r\n        obstacle3:cc.Node,\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    setMap(game){\r\n        this.GameWorld = game;\r\n        this.obstacle1 = game.getComponent('game').obstacle1;\r\n        this.obstacle2 = game.getComponent('game').obstacle2;\r\n        this.obstacle3 = game.getComponent('game').obstacle3;\r\n    },\r\n    setEnemy(enemy){\r\n        this.Enemy = enemy;\r\n    },\r\n    setSelf(SelfMonster){\r\n        this.SelfMonster = SelfMonster;\r\n    },\r\n    startControl(){\r\n        if(this.ControlOn)\r\n            return;\r\n        this.ControlOn = true;\r\n        this.bg = cc.find(\"Canvas/background\");\r\n        this.callback = function () {\r\n           \r\n            if (!this.ControlOn || this.GameWorld.gameOver) {\r\n                // 在第六次执行回调时取消这个计时器\r\n                this.unschedule(this.callback);\r\n            }else{\r\n                if(550 > mathUtil.getDistance(this.SelfMonster.node.getPosition(),this.Enemy.getPosition())){\r\n                   \r\n                    if(this.SelfMonster.starSprite.children.length-3 > this.Enemy.children[0].children.length){\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),this.Enemy.getPosition(),0,2.8,false);\r\n                    }else{\r\n                        let posi = this.SelfMonster.node.getPosition();\r\n                        let angle = 180;\r\n                        if(posi.x > 590 || posi.x <= -590 || posi.y < -590 || posi.y > 590){\r\n                            if(mathUtil.getAngle(this.GameWorld.node.getPosition(),posi)\r\n                                <mathUtil.getAngle(this.GameWorld.node.getPosition(),this.Enemy.getPosition())){\r\n                                    angle +=90;\r\n                            }else{\r\n                                angle -=90;\r\n                            }\r\n                        }\r\n                            var newVer2 = mathUtil.turnByAngle(posi,this.Enemy.getPosition(),angle,2.8,false);\r\n                        \r\n                        \r\n                    }\r\n                }else{\r\n                    var nearStar;\r\n                    var dis = 5000;\r\n                    console.log(this.bg.children.length);\r\n                    let posi = this.SelfMonster.node.getPosition();\r\n                        for(let i = 0;i<this.bg.children.length;i++){\r\n                        let star = this.bg.children[i];\r\n                        let dis2 = mathUtil.getDistance(posi,star.getPosition());\r\n                        if(dis2 < dis){\r\n                            dis = dis2;\r\n                            nearStar = star;\r\n                        };\r\n                    }  \r\n                    if(mathUtil.getDistance(posi,this.obstacle1.getPosition())<200){\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),this.obstacle1.getPosition(),90,2,false);\r\n                    }else if(mathUtil.getDistance(posi,this.obstacle2.getPosition())<200){\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),this.obstacle2.getPosition(),90,2,false);\r\n                    }else if(mathUtil.getDistance(posi,this.obstacle3.getPosition())<200){\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),this.obstacle3.getPosition(),90,2,false);\r\n                    }else{\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),nearStar.getPosition(),0,2,false);\r\n                    }\r\n                \r\n                }\r\n                this.SelfMonster.move(newVer2.x,newVer2.y);\r\n            }\r\n            \r\n        }\r\n        this.schedule(this.callback, 1);\r\n    },\r\n    stopControl(){\r\n        this.ControlOn = false;\r\n    },\r\n    log(value){\r\n        console.log(value);\r\n    },\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}