{"version":3,"sources":["mathUtil.js"],"names":["mathUtil","getAngle","positionA","positionB","len_y","y","len_x","x","tan_yx","Math","abs","angle","atan","PI","turnByAngle","p1","p2","dist","flag","sqrt","pow","angle2","atan2","p3x","cos","p3y","sin","console","log","cc","v2","getDistance","module","exports"],"mappings":";;;;;;AAAA,SAASA,QAAT,GAAoB,CAAE;AACtB;AACAA,SAASC,QAAT,GAAoB,UAASC,SAAT,EAAmBC,SAAnB,EAA6B;AAC7C,QAAIC,QAAQF,UAAUG,CAAV,GAAcF,UAAUE,CAApC;AACA,QAAIC,QAAQJ,UAAUK,CAAV,GAAcJ,UAAUI,CAApC;AACA,QAAIC,SAASC,KAAKC,GAAL,CAASN,QAAME,KAAf,CAAb;AACA,QAAIK,QAAQF,KAAKG,IAAL,CAAUJ,MAAV,IAAkB,GAAlB,GAAsBC,KAAKI,EAAvC;AACA,QAAGT,QAAM,CAAN,IAAWE,QAAM,CAApB,EAAsB;AAAC;AACnBK,gBAAQ,MAAMF,KAAKG,IAAL,CAAUJ,MAAV,IAAkB,GAAlB,GAAsBC,KAAKI,EAAzC;AACH,KAFD,MAEM,IAAGT,QAAQ,CAAR,IAAaE,QAAQ,CAAxB,EAA0B;AAAC;AAC7BK,gBAAQ,MAAMF,KAAKG,IAAL,CAAUJ,MAAV,IAAkB,GAAlB,GAAsBC,KAAKI,EAAzC;AACH,KAFK,MAEA,IAAGT,QAAQ,CAAR,IAAaE,QAAQ,CAAxB,EAA0B;AAAC;AAC7BK,gBAAQF,KAAKG,IAAL,CAAUJ,MAAV,IAAkB,GAAlB,GAAsBC,KAAKI,EAAnC;AACH,KAFK,MAEA,IAAGT,QAAQ,CAAR,IAAaE,QAAQ,CAAxB,EAA0B;AAAC;AAC7BK,gBAAQ,MAAMF,KAAKG,IAAL,CAAUJ,MAAV,IAAkB,GAAlB,GAAsBC,KAAKI,EAAzC;AACH;AACD,WAAOF,KAAP;AACH,CAfD;AAgBA;;;;;;;AAOAX,SAASc,WAAT,GAAuB,UAASC,EAAT,EAAYC,EAAZ,EAAeL,KAAf,EAAqBM,IAArB,EAA0BC,IAA1B,EAA+B;AAClD,QAAGD,QAAM,CAAT,EACIA,OAAOR,KAAKU,IAAL,CAAUV,KAAKW,GAAL,CAAUL,GAAGR,CAAH,GAAKS,GAAGT,CAAlB,EAAqB,CAArB,IAAwBE,KAAKW,GAAL,CAAUL,GAAGV,CAAH,GAAKW,GAAGX,CAAlB,EAAqB,CAArB,CAAlC,CAAP;AACJ,QAAIgB,SAASZ,KAAKa,KAAL,CAAYN,GAAGX,CAAH,GAAKU,GAAGV,CAApB,EAAyBW,GAAGT,CAAH,GAAKQ,GAAGR,CAAjC,KAAsC,MAAIE,KAAKI,EAA/C,CAAb;AACA,QAAGQ,SAAO,CAAV,EAAY;AACRA,iBAAS,MAAMA,MAAf;AACH;AACD,QAAIV,QAAQU,SAAOV,KAAnB;AACA,QAAIY,MAAMd,KAAKe,GAAL,CAASb,QAAOF,KAAKI,EAAZ,GAAiB,GAA1B,IAA+BI,IAAzC;AACA,QAAIQ,MAAMhB,KAAKiB,GAAL,CAASf,QAAOF,KAAKI,EAAZ,GAAiB,GAA1B,IAA+BI,IAAzC;AACAU,YAAQC,GAAR,CAAYL,MAAI,GAAJ,GAAQE,GAApB;AACA,QAAGP,IAAH,EAAQ;AACJK,eAAMP,GAAGT,CAAT;AACAkB,eAAMT,GAAGX,CAAT;AACH;AACD,WAAOwB,GAAGC,EAAH,CAAMP,GAAN,EAAUE,GAAV,CAAP;AAEH,CAjBD;AAkBAzB,SAAS+B,WAAT,GAAuB,UAAShB,EAAT,EAAYC,EAAZ,EAAe;AAClC,WAAOP,KAAKU,IAAL,CAAUV,KAAKW,GAAL,CAAUL,GAAGR,CAAH,GAAKS,GAAGT,CAAlB,EAAqB,CAArB,IAAwBE,KAAKW,GAAL,CAAUL,GAAGV,CAAH,GAAKW,GAAGX,CAAlB,EAAqB,CAArB,CAAlC,CAAP;AACH,CAFD;;AAIA2B,OAAOC,OAAP,GAAiBjC,QAAjB","file":"mathUtil.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\utils","sourcesContent":["function mathUtil() {}\r\n//由A到B的斜率\r\nmathUtil.getAngle = function(positionA,positionB){\r\n    var len_y = positionA.y - positionB.y;\r\n    var len_x = positionA.x - positionB.x;\r\n    var tan_yx = Math.abs(len_y/len_x);\r\n    var angle = Math.atan(tan_yx)*180/Math.PI;\r\n    if(len_y>0 && len_x<0){//第四象限\r\n        angle = 360 - Math.atan(tan_yx)*180/Math.PI;\r\n    }else if(len_y > 0 && len_x > 0){//第三象限\r\n        angle = 180 + Math.atan(tan_yx)*180/Math.PI;\r\n    }else if(len_y < 0 && len_x < 0){//第一现象\r\n        angle = Math.atan(tan_yx)*180/Math.PI;\r\n    }else if(len_y < 0 && len_x > 0){//第二象限\r\n        angle = 180 - Math.atan(tan_yx)*180/Math.PI;\r\n    }\r\n    return angle;\r\n};\r\n/**\r\n * 偏转到\r\n * p1 p2 原始路径\r\n * angle 偏转角度\r\n * dist 偏转距离\r\n * flag true返回坐标 false返回向量\r\n*/\r\nmathUtil.turnByAngle = function(p1,p2,angle,dist,flag){\r\n    if(dist==0)\r\n        dist = Math.sqrt(Math.pow((p1.x-p2.x),2)+Math.pow((p1.y-p2.y),2));\r\n    var angle2 = Math.atan2((p2.y-p1.y), (p2.x-p1.x))*(180/Math.PI);\r\n    if(angle2<0){\r\n        angle2 = 360 + angle2;\r\n    }\r\n    var angle = angle2+angle;\r\n    var p3x = Math.cos(angle* Math.PI / 180)*dist;\r\n    var p3y = Math.sin(angle* Math.PI / 180)*dist;\r\n    console.log(p3x+\",\"+p3y);\r\n    if(flag){\r\n        p3x +=p2.x;\r\n        p3y +=p2.y;\r\n    }\r\n    return cc.v2(p3x,p3y);\r\n    \r\n};\r\nmathUtil.getDistance = function(p1,p2){\r\n    return Math.sqrt(Math.pow((p1.x-p2.x),2)+Math.pow((p1.y-p2.y),2));\r\n};\r\n\r\nmodule.exports = mathUtil;"]}