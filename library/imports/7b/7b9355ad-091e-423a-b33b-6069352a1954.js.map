{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\AI.js"],"names":["mathUtil","require","cc","Class","extends","Component","properties","ControlOn","Enemy","Node","GameWorld","SelfMonster","bg","setMap","game","setEnemy","enemy","setSelf","startControl","find","callback","gameOver","unschedule","getDistance","node","getPosition","starSprite","children","length","newVer2","turnByAngle","posi","angle","pos","x","y","getAngle","nearStar","dis","console","log","i","star","dis2","move","schedule","stopControl","value","start"],"mappings":"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","file":"AI.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet mathUtil = require(\"util/mathUtil\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ControlOn:false,\r\n        Enemy:cc.Node,\r\n        GameWorld:cc.Node,\r\n        SelfMonster:null,\r\n        bg:cc.Node,\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    setMap(game){\r\n        this.GameWorld = game;\r\n    },\r\n    setEnemy(enemy){\r\n        this.Enemy = enemy;\r\n    },\r\n    setSelf(SelfMonster){\r\n        this.SelfMonster = SelfMonster;\r\n    },\r\n    startControl(){\r\n        if(this.ControlOn)\r\n            return;\r\n        this.ControlOn = true;\r\n        this.bg = cc.find(\"Canvas/background\");\r\n        this.callback = function () {\r\n           \r\n            if (!this.ControlOn || this.GameWorld.gameOver) {\r\n                // 在第六次执行回调时取消这个计时器\r\n                this.unschedule(this.callback);\r\n            }else{\r\n                if(550 > mathUtil.getDistance(this.SelfMonster.node.getPosition(),this.Enemy.getPosition())){\r\n                   \r\n                    if(this.SelfMonster.starSprite.children.length-3 > this.Enemy.children[0].children.length){\r\n                        var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),this.Enemy.getPosition(),0,2.8,false);\r\n                    }else{\r\n                        let posi = this.SelfMonster.node.getPosition();\r\n                        let angle = 180;\r\n                        if(pos.x > 590 || pos.x < -590 ||pos.y < -590 || pos.y > 590){\r\n                            mathUtil.getAngle(posi,this.Enemy.getPosition());\r\n                        }\r\n                        var newVer2 = mathUtil.turnByAngle(posi,this.Enemy.getPosition(),180,2.8,false);\r\n                    }\r\n                }else{\r\n                    var nearStar;\r\n                    var dis = 5000;\r\n                    console.log(this.bg.children.length);\r\n                        for(let i = 0;i<this.bg.children.length;i++){\r\n                        let star = this.bg.children[i];\r\n                        let dis2 = mathUtil.getDistance(this.SelfMonster.node.getPosition(),star.getPosition());\r\n                        if(dis2 < dis){\r\n                            dis = dis2;\r\n                            nearStar = star;\r\n                        };\r\n                    }  \r\n                var newVer2 = mathUtil.turnByAngle(this.SelfMonster.node.getPosition(),nearStar.getPosition(),0,2,false);\r\n                }\r\n                this.SelfMonster.move(newVer2.x,newVer2.y);\r\n            }\r\n            \r\n        }\r\n        this.schedule(this.callback, 1);\r\n    },\r\n    stopControl(){\r\n        this.ControlOn = false;\r\n    },\r\n    log(value){\r\n        console.log(value);\r\n    },\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}